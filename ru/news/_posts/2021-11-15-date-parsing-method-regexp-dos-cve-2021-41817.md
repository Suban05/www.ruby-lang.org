---
layout: news_post
title: "CVE-2021-41817: Уязвимость отказа в обслуживании при помощи регулярных выражений в методах разбора даты"
author: "mame"
translator: "suban05"
date: 2021-11-15 08:00:00 +0000
tags: security
lang: ru
---

Мы выпустили версии гема date 3.2.1, 3.1.2, 3.0.2 и 2.0.1, которые включают исправление безопасности для уязвимости отказа в обслуживании при помощи регулярных выражений (ReDoS) в методах разбора даты. Злоумышленник может использовать эту уязвимость для проведения эффективной атаки отказа в обслуживании. Эта уязвимость получила идентификатор CVE [CVE-2021-41817](https://www.cve.org/CVERecord?id=CVE-2021-41817).

## Подробности

Методы разбора даты, включая `Date.parse`, используют регулярные выражения (Regexps) внутренне, некоторые из которых уязвимы для отказа в обслуживании при помощи регулярных выражений. Приложения и библиотеки, которые применяют такие методы к ненадежным входным данным, могут быть затронуты.

Исправление ограничивает длину входных данных до 128 байт по умолчанию вместо изменения регулярных выражений. Это связано с тем, что гем Date использует много регулярных выражений, и возможно, что существуют ещё не обнаруженные уязвимые регулярные выражения. Для совместимости разрешено убрать это ограничение, явно передавая ключевое слово `limit` как `nil`, например, `Date.parse(str, limit: nil)`, но имейте в виду, что это может занять много времени для разбора.

Пожалуйста, обновите гем date до версии 3.2.1, 3.1.2, 3.0.2, 2.0.1 или более поздней. Вы можете использовать `gem update date` для его обновления. Если вы используете bundler, добавьте `gem "date", ">= 3.2.1"` в ваш `Gemfile`. Альтернативно, вы можете обновить Ruby до версии 3.0.3, 2.7.5, 2.6.9 или более поздней.

## Затронутые версии

* гем date 2.0.0 или ранее (которые поставляются с Ruby 2.6 серии до Ruby 2.6.9)
* гем date 3.0.1 или ранее (которые поставляются с Ruby 2.7 серии до Ruby 2.7.5)
* гем date 3.1.1 или ранее (которые поставляются с Ruby 3.0 серии до Ruby 3.0.3)
* гем date 3.2.0 или ранее

## Благодарности

Спасибо [svalkanov](https://github.com/SValkanov/) за обнаружение этой проблемы.

## История

* Изначально опубликовано 2021-11-15 08:00:00 (UTC)
* Добавлено упоминание о новых версиях Ruby 2021-11-24 13:20:00 (UTC)
